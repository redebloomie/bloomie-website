<!doctype html>
<html lang="en">

<head>
  <title>Title</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.3/css/swiper.css'>

  <link rel="stylesheet" href="../../public/style.css">
  <link rel="shortcut icon" href="/src/assets/bluBloomie.png" />

  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <script src="https://kit.fontawesome.com/fec6e5d711.js" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <style>
    .container-tag {
      .input-tag {
        border: none;
        border-radius: 15px;
        padding: 10px 15px;

        &::placeholder {
          color: #aaa;
        }

        &:focus {
          outline: none;
        }
      }

      .error {
        font-size: 13px;
        margin-top: 20px;
      }

      .tags {
        margin-top: 20px;

        .tag {
          background-color: #1185E3;
          font-size: 13px;
          padding: 0 5px;
          color: #fff;
          border-radius: 4px;
          margin-right: 5px;
          display: inline-flex;
          align-items: center;
          font-weight: 600;

          span {
            color: #ffffff;
          }

          .rmvItem {
            color: #fff;
            font-size: 20px;
            display: flex;
            margin: 0 4px;
            cursor: pointer;
            color: red;
            font-weight: bold
          }
        }
      }
    }
  </style>
</head>

<body id="homepage">
  <nav class="navbar navbar-expand-sm navbar-dark bg-white" style="position: fixed; top: 0; width: 100%;">
    <a class="navbar-brand" href="#"><img src="/src/assets/logoBloomie-blu.png" alt="" width="150px"></a>
  </nav>

  <main>
    <div class="row justify-content-start align-items-start g-0">
      <div class="col-2 bg-primary sidebar-container" style="position: fixed; margin-top: 10vh;">
        <div class="container text-center sidebar">
          <div class="row row-cols-1 justify-content-around align-items-center g-5">
            <div class="col">
              <span class="searchbar rounded-4">
                <i class="ph ph-magnifying-glass"></i>
                <input type="text" name="" id="" placeholder="Buscar...">
              </span>
            </div>
            <div class="col">
              <div class="row row-cols-1 justify-content-start align-items-center g-3 text-start">
                <div class="col text-white sidebar-op">
                  <i class="ph ph-house"></i>
                  <a href="../pages/homepage-postagens.html" class="text-decoration-none text-white">Home</a>
                </div>
                <div class="col text-white sidebar-op">
                  <i class="ph ph-user"></i>
                  <a href="../pages/perfil.html" class="text-decoration-none text-white">Perfil</a>
                </div>
                <div class="col text-white sidebar-op">
                  <i class="ph ph-bell-ringing"></i>
                  <a href="" class="text-decoration-none text-white">Notificações</a>
                </div>
                <div class="col text-white sidebar-op">
                  <i class="ph ph-plant"></i>
                  <a href="../pages/enviarOportunidade.html" class="text-decoration-none text-white">Enviar<br>oportunidades</a>
                </div>
                <div class="col text-white sidebar-op">
                  <i class="ph ph-gear"></i>
                  <a href="" class="text-decoration-none text-white">Configurações</a>
                </div>
                <div class="col text-white sidebar-op">
                  <i class="ph ph-question"></i>
                  <a href="" class="text-decoration-none text-white">Ajuda & suporte</a>
                </div>
              </div>
            </div>
            <div class="col">
              <a href="" class="text-decoration-none text-white">Sair</a>
            </div>
          </div>
        </div>
      </div>

      <div class="col-10 justify-content-center d-flex g-0" style="margin-left: 10vw; margin-top: 10vw;">
        <section id="cadastro" style="height: 220vh; display: flex; justify-content: start; align-items: start;">
          <div class="cadastro-container"
            style="display: flex; justify-content: flex-start; align-items: start;">
            <div class="form-cadastro" style="height: 220vh;">
              <h2 class="text-center" style="font-weight: 700;">É hora de plantar o futuro!</h2>
              <h3 class="text-center" style="font-weight: 400;">Acesse oportunidades incríveis!<br><span
                  style="font-weight: 500;">Crie sua conta</span> e <span style="font-weight: 500;">junte-se à
                  Bloomie.</span></h3>
              <form class="row g-3" method="post" action="../PHP/enviarOportunidade.php" class="form-cadastro-usuario">
                <div class="col-md-12">
                  <P>Título da oportunidade</P>
                  <input type="text" name="titulo" class="form-control" name="titulo" id="titulo">
                </div>

                <div class="col-md-12">
                  <p>Categoria</p>
                  <select name="categoria" class="col-md-12">
                    <option value="">Estágios</option>
                    <option value="">Aprendizado</option>
                    <option value="">Bolsas de estudo</option>
                    <option value="">Estágio</option>
                    <option value="">Estágio</option>
                  </select>
                </div>

                <div class="col-md-6 col-sm-6 estado_cidade">
                  <p>Estado</p>
                  <select id="uf" name="estado">
                    <option>Estado</option>
                  </select>
                </div>
                <div class="col-md-6 col-sm-6 estado_cidade">
                  <p>Cidade</p>
                  <select id="cidade" name="cidade">
                    <option>Cidade</option>
                  </select>
                </div>

                <div class="col-md-6 col-sm-4">
                  <p>Início</p>
                  <input class="col-md-12" type="date" name="inicio" id="inicio">
                </div>
                <div class="col-md-6 col-sm-4">
                  <p>Prazo de vencimento</p>
                  <input class="col-md-12" type="date" name="tempo_expirar" id="vencimento">
                </div>

                <div class="col-md-12">
                  <p>Faixa etária</p>
                  <select class="col-md-12" id="faixa_etaria" name="faixa_etaria">
                    <option>13 a 15 anos</option>
                    <option>15 a 18 anos</option>
                    <option>18+ anos</option>
                  </select>
                </div>

                <div class="col-md-12">
                  <p>Escolaridade</p>
                  <select class="col-md-12" id="escolaridade" name="escolaridade">
                    <option></option>
                  </select>
                </div>

                <div class="col-md-12">
                  <p>Link de acesso à oportunidade</p>
                  <input type="text" class="form-control" name="link" id="link">
                </div>

                <div class="col-md-12">
                  <p>Tipo de personalidade</p>
                  <select class="col-md-12" id="tipo_personalidade" name="tipo_personalidade">
                    <option>Dominante</option>
                    <option>Influente</option>
                    <option>Estável</option>
                    <option>Conforme</option>
                  </select>
                </div>

                <div class="i-info col-md-12"
                  style="display: flex; flex-direction: row; justify-content: center; align-items: center;">
                  <div class="pers"
                    style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <div class="pers-container">
                      <img src="https://source.unsplash.com/random/100x100" alt="">
                    </div>
                    <p>Influência (I)</p>
                  </div>
                  <div class="pers-desc">
                    <ul>
                      <li>Sociável, extrovertido e cheio de energia.</li>
                      <li>Habilidades fortes de comunicação e persuasão.</li>
                      <li>Criativo e cheio de ideias inovadoras.</li>
                      <li>Capacidade de motivar e inspirar os outros.</li>
                    </ul>
                  </div>
                </div>

                <div class="col-md-12">
                  <p>Tags</p>
                  <div class="container-tag col-md-12">
                    <input type="text" class="input-tag col-md-12" placeholder="Insira um ; após cada tag"/>
                  </div>
                </div>

                <div class="pers-foto col-md-12"
                  style="display: flex; flex-direction: row; justify-content: center; align-items: center;">
                  <div class="pers"
                    style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <div class="pers-container border">
                      <label for="uploadImagem">Enviar arquivo</label>
                      <input type="file" name="imagem" id="uploadImagem" accept="image/*" size="5000000">
                    </div>
                  </div>
                  <div class="pers-desc">
                    <ol>
                      <li>Escolha fotos de boa qualidade e relevantes para a oportunidade.</li>
                      <li>Evite fotos ofensivas, inadequadas ou que violem direitos autorais.</li>
                      <li>Siga as diretrizes e termos da Bloomie ao adicionar fotos nas oportunidades.</li>
                    </ol>
                  </div>
                </div>

                <div class="col-md-12 text-center btn-lg">
                  <input type="submit" name="submit" class="btn btn-primary" value="Enviar oportunidade" style="border-radius: 20px;
                  width: 30vw;
                  height: 5vh;
                  font-size: 18px;
                  font-weight: 500;
                  margin-bottom: 1vw;
                  text-align: center;
                  margin-top: 1vw;
                  background-color: #1185E3;
                  border: #1185E3;
                  color:#fff;" />
                  <p><a href="/public/index.html#login" style="font-weight: 500; color: #5AB5FF;">Voltar</a>
                  </p>
                </div>
              </form>
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>

  <footer>
    <!-- place footer here -->
  </footer>
  <!-- Bootstrap JavaScript Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">
    </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
    integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous">
    </script>

  <script>
    $(document).ready(function () {
      $.dobPicker({
        daySelector: '#dobday', /* Required */
        monthSelector: '#dobmonth', /* Required */
        yearSelector: '#dobyear', /* Required */
        dayDefault: 'Dia', /* Optional */
        monthDefault: 'Mês', /* Optional */
        yearDefault: 'Ano', /* Optional */
        minimumAge: 14, /* Optional */
        maximumAge: 100 /* Optional */
      });
    });

    // --------------- CIDADES E ESTADOS ------------------
    const ulrUF = 'https://servicodados.ibge.gov.br/api/v1/localidades/estados'
    const cidade = document.getElementById("cidade");
    const uf = document.getElementById("uf");

    uf.addEventListener('change', async function () {
      const urlCidades = 'https://servicodados.ibge.gov.br/api/v1/localidades/estados/' + uf.value + '/municipios';
      const request = await fetch(urlCidades);
      const response = await request.json();
      console.log(response.length);
      let options = ''
      response.forEach(function (cidades) {
        options += `<option name="cidade">` + cidades.nome + '</option>'
      });
      cidade.innerHTML = options;

    });

    window.addEventListener('load', async () => {
      const request = await fetch(ulrUF)
      const response = await request.json()

      console.log(response)
      const options = document.createElement("optgroup")
      options.setAttribute('label', 'UFS')
      response.forEach(function (uf) {
        options.innerHTML += `<option name="estado">` + uf.sigla + '</option>'

        response.forEach(function (uf) {
          console.log(uf.sigla)
        });
      })

      uf.append(options);

    })

    // TAG BUTTON

    const container = document.querySelector('.container-tag');
    const input = container.querySelector('input');

    let data = [];

    const initialDom = () => {
      container.insertAdjacentHTML(
        'beforeend',
        `
            <div class="error"></div>
            <div class="tags"></div>
        `
      );
    };
    initialDom();

    const createDomTags = () => {
      const tags = document.querySelector('.tags');
      let result = '';
      for (let item of data) {
        result += `<div class="tag" target=${item.id}><span>${item.text}</span><span class="rmvItem">&times</span></div>`;
      }
      tags.innerHTML = result;
      removeItem();
    };

    const removeItem = () => {
      const rmvItem = document.querySelectorAll('.rmvItem');
      for (let item of [...rmvItem]) {
        item.addEventListener('click', () => {
          data = data.filter((checkItem) => checkItem.id !== +item.parentElement.getAttribute('target'));
          createDomTags();
        });
      }
    };

    input.addEventListener('keypress', (e) => {
      document.querySelector('.error').innerHTML = '';
      if (e.key === 'Control' || e.key === ';') {
        showError();

        data.forEach((item) => {
          if (item.text.includes(input.value.trim())) {
            data = data.filter((item) => item.text !== input.value.trim());
          }
        });

        if (input.value.trim() !== '') {
          data.push({
            text: input.value.trim(),
            id: Date.now(),
          });
        }

        createDomTags();

        input.value = '';
      }
    });

    const showError = () => {
      for (let item of data) {
        if (item.text.includes(input.value.trim())) {
          document.querySelector('.error').innerHTML = 'There is this word';
        }
      }
    };

  </script>

  <script src="../../public/script.js"></script>

</body>

</html>